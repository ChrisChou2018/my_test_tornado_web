{% extends "../admin/a_layout.html" %}

{% block title %}美会说 - {{ handler.settings["site_name"] }}管理后台{% end %}

{% block head %}
{% end %}


{% block header %}
{% module AdminNavModule() %}
{% end %}


{% block content %}

{% module AdminMenuModule("members") %}

<div class="content-wrapper" style="min-height: 612px;">
  <div class="content-header">
    <h1>会员信息</h1>
  </div>

  <!-- Main content -->
  <div class="content" style="min-height:100px;">
  <form role="form" method="get">
   {% module xsrf_form_html() %}
    <div class="row" >
      <div class="col-xs-12">
        <div class="box">
          <div class="box-header with-border">
                <div class="col-sm-6">
                  <dl class="dl-horizontal">
                    <dt> 会员ID: </dt>
                    <dd> {{member.member_id}} </dd>
                    <dt> 会员名称: </dt>
                    <dd> {{member.member_name}} </dd>
                    {% if member.is_staff %}
                    <dt> 公司员工: </dt>
                    <dd> 是 </dd>
                    {% end %}
                    <dt> 电话号码: </dt>
                    <dd> {{member.telephone}} </dd>
                    <dt> 注册时间: </dt>
                    <dd>{{member.create_time}} </dd>
                    <dt style="color: red;">账户余额:</dt>
                    <dd>{{ member.account_balance }}</dd>
                    <dt style="color: red;">VIP 会员信息:</dt>
                    <dd>{{ vip_avail }}</dd>
                  </dl>
                </div>
          </div>
        </div>
      </div>
    </div>
  </form>

  <div class="row">
    <div class="col-sm-12">
      <div class="box">
        <div class="box-header">
          <h3 class="box-title">余额变动记录</h3>
        </div>
        <div class="box-body">
          <table class="table table-bordered table-hover">
              <thead>
                <tr>
                  <th style="text-align: center;"> 序号 </th>
                  <th style="text-align: center;">记录ID</th>
                  <th style="text-align: center;"> 金额 </th>
                  <th style="text-align: center;"> 变动原因 </th>
                  <th style="text-align: center;"> 变动时间 </th>
                </tr>
              </thead>
              <tbody>
                {% for idx, log in enumerate(acc_logs) %}
                  <tr>
                    <td> {{ idx+1 }} </td>
                    <td>{{ log["id"] }}</td>
                    <td>{{ log["amount"] }} </a> </td>
                    <td> {{ log["reason_desc"] }} </td>
                    <td> {{ log["created_at_str"] }} </td>
                  </tr>
                {% end %}
              </tbody>
            </table>
        </div>
      </div>
    </div>
  </div>

    <div class="row">
      <div class="col-sm-12">
        <div class="box">
          <div class="box-header">
            <h3 class="box-title">订单列表</h3>
          </div>
          <div class="box-body">
            <table class="table table-bordered table-hover">
              <thead>
                <tr>
                  <th style="text-align: center;"> 序号 </th>
                  <th style="text-align: center;"> 订单ID </th>
                  <th style="text-align: center;"> 总价 </th>
                  <th style="text-align: center;"> 状态 </th>
                  <th style="text-align: center;"> 创建时间 </th>
                  <th style="text-align: center;"> 优惠券ID </th>
                </tr>
              </thead>
              <tbody>
                {% for index, order in enumerate(orders) %}
                  <tr>
                    <td> {{index+1}} </td>
                    <td> <a href="/orders/{{order.order_id}}/"> {{order.order_id}} </a> </td>
                    <td> {{order.price}} </td>
                    <td>
                        {% if order.status == "1" %} 待付款
                        {% elif order.status == "2" %} 待发货
                        {% elif order.status == "3" %} 待收货
                        {% elif order.status == "4" %} 已收货
                        {% elif order.status == "10" %} 交易关闭
                        {% elif order.status == "11" %} 未成团，待付款
                        {% elif order.status == "12" %} 未成团，已支付
                        {% elif order.status == "13" %} 已成团,待发货
                        {% elif order.status == "14" or order.status == "15" %} 已成团,待收货
                        {% elif order.status == "16" %} 未成团,已退款
                        {% elif order.status == "17" %} 未成团,待退款
                        {% end %}
                    </td>
                    <td> {{order.create_time}} </td>
                    <td> {{order.coupon_id}} </td>
                  </tr>
                {% end %}
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>

    <div class="row">
      <div class="col-sm-12">
        <div class="box">
          <div class="box-header">
            <h3 class="box-title">发表的评论</h3>
          </div>
          <div class="box-body">
            <table class="table table-bordered table-hover">
              <thead>
                <tr>
                  <th style="text-align: center;"> 序号 </th>
                  <th style="text-align: center;"> 评论内容 </th>
                  <th style="text-align: center;"> 是否为精华 </th>
                  <th style="text-align: center;"> 评论时间 </th>
                  <th style="text-align: center;"> 相关商品 </th>
                </tr>
              </thead>
              <tbody>
                {% for index, comment in enumerate(comments) %}
                  <tr>
                    <td> {{index+1}} </td>
                    <td> {{comment.content}} </td>
                    <td> {{"Y" if comment.is_essence == "1" else "N"}} </td>
                    <td> {{comment.create_time}} </td>
                    <td> <a href="/goods/{{comment.goods_id}}/"> {{comment.goods_id}} </a> </td>
                  </tr>
                {% end %}
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>


  </div>
</div>

{% end %}


{% block footer %}
{% module AdminFooterModule() %}
{% end %}


{% block tail_script %}
{% end %}